# 課題12
<div style="text-align:right;">
1X22B138 益田隆太郎

2025/11/12
</div>

### ソースコード
program122.c
```c
#include <stdio.h>
#include <time.h>

int main(void){
    clock_t start, end;
    unsigned int port;
    long long i;
    //volatile long long i;

    start = clock();
    printf("開始時間:%ld\n",start);

    port = 1U;
    for(i=0;i<50000000;i++){;}
    port = 0U;

    end = clock();
    printf("終了時間:%ld\n\n",end);
    printf("処理時間=%ld[cpu時間],%3lf[s]\n",end-start,(double)(end-start)/CLOCKS_PER_SEC);
    return 0;
}
```
### 結果  
```
masuda@DESKTOP-JOV4TPA:~/work/C_intermediate/src$ ./program122 
開始時間:847
終了時間:13334

処理時間=12487[cpu時間],0.012487[s]
```

### ソースコード
program122_a
```
#include<stdio.h>
#include<time.h>

int main(void){
    clock_t start, end;
    unsigned int port;
    volatile long long i;

    start = clock();
    printf("開始時間:%d\n",start);

    port = 1U;
    for(i=0;i<500000000;i++){;}
    port = 0U;

    end = clock();
    printf("終了時間:%ld\n\n",end);
    printf("処理時間=%ld[cpu時間],%3lf[s]\n",end-start,(double)(end-start)/CLOCKS_PER_SEC);
    return 0;
}
```

### 結果
```
masuda@DESKTOP-JOV4TPA:~/work/C_intermediate/src$ ./program122_a 
開始時間:746
終了時間:195671

処理時間=194925[cpu時間],0.194925[s]
```
### まとめ
- アセンブラはCPUによって出力が異なる
- movlとかでデータの移動を行う
- memsetは最適化をかけると消えてしまう
    - 最適化抑止の方法は変数を指定する方法と関数を指定する方法の2種類ある
        - 変数はvolatile
        - 関数は#programaでサンドイッチにする
    - memsetの場合は関数指定
    - memsetはパスワードの0処理に使われる